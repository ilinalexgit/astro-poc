---
import Container from "@components/Container.astro";
import { Image } from "astro:assets";
import {
    ArrowPathIcon,
    Bars3Icon,
    ChartPieIcon,
    CursorArrowRaysIcon,
    FingerPrintIcon,
    SquaresPlusIcon,
    XMarkIcon,
} from "@heroicons/react/24/outline";
import YmLogo from "@assets/ym-logo.png";
import { languageTag } from "../paraglide/runtime";
import DropDown from "./ui/DropDown";
import Button from "./ui/Button";
import LanguagePicker from "./ui/LanguagePicker";

let pathName = Astro.url.pathname.replace(`/${languageTag()}`, "");

const menuitems = [
    {
        title: "Features",
        path: "#",
        children: [
            { title: "Action", path: "/" },
            { title: "Another action", path: "#" },
            { title: "Dropdown Submenu", path: "#" },
            { title: "404 Page", path: "/404" },
        ],
    },
    {
        title: "Pricing",
        path: "/pricing",
    },
    {
        title: "About",
        path: "/about",
    },
    {
        title: "Blog",
        path: "/blog",
    },
    {
        title: "Contact",
        path: "/contact",
    },
];

const makeUrlForLanguage = (lang: string) =>
    `/${lang}${Astro.url.pathname.replace(`/${languageTag()}`, "")}`;
---

<Container>
    <header
        class="flex flex-col md:flex-row justify-between items-center relative z-10">
        <nav
            aria-label="Global"
            class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8 w-full">
            <div class="flex lg:flex-1">
                <a href="/" class="h-16">
                    <span class="sr-only">Y Meadows</span>
                    <Image
                        class="min-h-16 min-w-64"
                        src={YmLogo}
                        alt="Y Meadows Logo."
                        height="64"
                    />
                </a>
            </div>
            <div class="flex">
                <div class="flex lg:hidden">
                    <button
                        type="button"
                        class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700">
                        <span class="sr-only">Open main menu</span>
                        <Bars3Icon aria-hidden="true" className="size-6" />
                    </button>
                </div>
                <div class="hidden lg:flex lg:gap-x-12">
                    <DropDown text="Solutions" client:visible>
                        <ul class="flex flex-col gap-y-4 p-4">
                            <li>
                                <Button
                                    className="text-sm/6 font-semibold text-gray-900"
                                    href={`/${Astro.params.lang}/new`}
                                    asLink={true}
                                    variant="light"
                                    client:visible>
                                    How It Works
                                </Button>
                            </li>
                            <li>
                                <Button
                                    className="text-sm/6 font-semibold text-gray-900"
                                    href={`/${Astro.params.lang}/new`}
                                    asLink={true}
                                    variant="light"
                                    client:visible>
                                    Pricing
                                </Button>
                            </li>
                            <li>
                                <Button
                                    className="text-sm/6 font-semibold text-gray-900"
                                    href={`/${Astro.params.lang}/integrations`}
                                    asLink={true}
                                    variant="light"
                                    client:visible>
                                    Integrations
                                </Button>
                            </li>
                        </ul>
                    </DropDown>

                    <Button
                        className="text-sm/6 font-semibold text-gray-900"
                        href={`/${Astro.params.lang}/new`}
                        asLink={true}
                        variant="light"
                        client:visible>
                        Resources
                    </Button>
                    <Button
                        className="text-sm/6 font-semibold text-gray-900"
                        href={`/${Astro.params.lang}/posts`}
                        asLink={true}
                        variant="light"
                        client:visible>
                        Blog
                    </Button>
                    <Button
                        className="text-sm/6 font-semibold text-gray-900"
                        href={`/${Astro.params.lang}/new`}
                        asLink={true}
                        variant="light"
                        client:visible>
                        About
                    </Button>

                    <LanguagePicker lang={ Astro.params.lang } client:visible>
                        <ul class="flex flex-col gap-y-4 p-4">
                            <li>
                                <a href={`${pathName ? '/fr'+pathName : '/fr'}`}>French</a>
                            </li>
                            <li>
                                <a href={`${pathName ? '/en'+pathName: '/en'}`}>English</a>
                            </li>
                        </ul>
                    </LanguagePicker>
                </div>
            </div>
        </nav>
    </header>
</Container>
